    void set_simulator(Simulator* simulator) {
      simulator_ = simulator;
    }